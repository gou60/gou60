(function(window,$,undefined){'use strict';var $event=$.event,resizeTimeout;$event.special.smartresize={setup:function(){$(this).bind("resize",$event.special.smartresize.handler);},teardown:function(){$(this).unbind("resize",$event.special.smartresize.handler);},handler:function(event,execAsap){var context=this,args=arguments;event.type="smartresize";if(resizeTimeout){clearTimeout(resizeTimeout);}
resizeTimeout=setTimeout(function(){jQuery.event.handle.apply(context,args);},execAsap==="execAsap"?0:100);}};$.fn.smartresize=function(fn){return fn?this.bind("smartresize",fn):this.trigger("smartresize",["execAsap"]);};$.Mason=function(options,element){this.element=$(element);this._create(options);this._init();};$.Mason.settings={isResizable:true,isAnimated:false,animationOptions:{queue:false,duration:500},gutterWidth:0,isRTL:false,isFitWidth:false,containerStyle:{position:'relative'}};$.Mason.prototype={_filterFindBricks:function($elems){var selector=this.options.itemSelector;return!selector?$elems:$elems.filter(selector).add($elems.find(selector));},_getBricks:function($elems){var $bricks=this._filterFindBricks($elems).css({position:'absolute'}).addClass('masonry-brick');return $bricks;},_create:function(options){this.options=$.extend(true,{},$.Mason.settings,options);this.styleQueue=[];var elemStyle=this.element[0].style;this.originalStyle={height:elemStyle.height||''};var containerStyle=this.options.containerStyle;for(var prop in containerStyle){this.originalStyle[prop]=elemStyle[prop]||'';}
this.element.css(containerStyle);this.horizontalDirection=this.options.isRTL?'right':'left';this.offset={x:parseInt(this.element.css('padding-'+this.horizontalDirection),10),y:parseInt(this.element.css('padding-top'),10)};this.isFluid=this.options.columnWidth&&typeof this.options.columnWidth==='function';var instance=this;setTimeout(function(){instance.element.addClass('masonry');},0);if(this.options.isResizable){$(window).bind('smartresize.masonry',function(){instance.resize();});}
this.reloadItems();},_init:function(callback){this._getColumns();this._reLayout(callback);},option:function(key,value){if($.isPlainObject(key)){this.options=$.extend(true,this.options,key);}},layout:function($bricks,callback){for(var i=0,len=$bricks.length;i<len;i++){this._placeBrick($bricks[i]);}
var containerSize={};containerSize.height=Math.max.apply(Math,this.colYs);if(this.options.isFitWidth){var unusedCols=0;i=this.cols;while(--i){if(this.colYs[i]!==0){break;}
unusedCols++;}
containerSize.width=(this.cols-unusedCols)*this.columnWidth-this.options.gutterWidth;}
this.styleQueue.push({$el:this.element,style:containerSize});var styleFn=!this.isLaidOut?'css':(this.options.isAnimated?'animate':'css'),animOpts=this.options.animationOptions;var obj;for(i=0,len=this.styleQueue.length;i<len;i++){obj=this.styleQueue[i];obj.$el[styleFn](obj.style,animOpts);}
this.styleQueue=[];if(callback){callback.call($bricks);}
this.isLaidOut=true;},_getColumns:function(){var container=this.options.isFitWidth?this.element.parent():this.element,containerWidth=container.width();this.columnWidth=this.isFluid?this.options.columnWidth(containerWidth):this.options.columnWidth||this.$bricks.outerWidth(true)||containerWidth;this.columnWidth+=this.options.gutterWidth;this.cols=Math.floor((containerWidth+this.options.gutterWidth)/this.columnWidth);this.cols=Math.max(this.cols,1);},_placeBrick:function(brick){var $brick=$(brick),colSpan,groupCount,groupY,groupColY,j;colSpan=Math.ceil($brick.outerWidth(true)/(this.columnWidth+this.options.gutterWidth));colSpan=Math.min(colSpan,this.cols);if(colSpan===1){groupY=this.colYs;}else{groupCount=this.cols+1-colSpan;groupY=[];for(j=0;j<groupCount;j++){groupColY=this.colYs.slice(j,j+colSpan);groupY[j]=Math.max.apply(Math,groupColY);}}
var minimumY=Math.min.apply(Math,groupY),shortCol=0;for(var i=0,len=groupY.length;i<len;i++){if(groupY[i]===minimumY){shortCol=i;break;}}
var position={top:minimumY+this.offset.y};position[this.horizontalDirection]=this.columnWidth*shortCol+this.offset.x;this.styleQueue.push({$el:$brick,style:position});var setHeight=minimumY+$brick.outerHeight(true),setSpan=this.cols+1-len;for(i=0;i<setSpan;i++){this.colYs[shortCol+i]=setHeight;}},resize:function(){var prevColCount=this.cols;this._getColumns();if(this.isFluid||this.cols!==prevColCount){this._reLayout();}},_reLayout:function(callback){var i=this.cols;this.colYs=[];while(i--){this.colYs.push(0);}
this.layout(this.$bricks,callback);},reloadItems:function(){this.$bricks=this._getBricks(this.element.children());},reload:function(callback){this.reloadItems();this._init(callback);},appended:function($content,isAnimatedFromBottom,callback){if(isAnimatedFromBottom){this._filterFindBricks($content).css({top:this.element.height()});var instance=this;setTimeout(function(){instance._appended($content,callback);},1);}else{this._appended($content,callback);}},_appended:function($content,callback){var $newBricks=this._getBricks($content);this.$bricks=this.$bricks.add($newBricks);this.layout($newBricks,callback);},remove:function($content){this.$bricks=this.$bricks.not($content);$content.remove();},destroy:function(){this.$bricks.removeClass('masonry-brick').each(function(){this.style.position='';this.style.top='';this.style.left='';});var elemStyle=this.element[0].style;for(var prop in this.originalStyle){elemStyle[prop]=this.originalStyle[prop];}
this.element.unbind('.masonry').removeClass('masonry').removeData('masonry');$(window).unbind('.masonry');}};$.fn.imagesLoaded=function(callback){var $this=this,$images=$this.find('img').add($this.filter('img')),len=$images.length,blank='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==',loaded=[];function triggerCallback(){callback.call($this,$images);}
function imgLoaded(event){var img=event.target;if(img.src!==blank&&$.inArray(img,loaded)===-1){loaded.push(img);if(--len<=0){setTimeout(triggerCallback);$images.unbind('.imagesLoaded',imgLoaded);}}}
if(!len){triggerCallback();}
$images.bind('load.imagesLoaded error.imagesLoaded',imgLoaded).each(function(){var src=this.src;this.src=blank;this.src=src;});return $this;};var logError=function(message){if(window.console){window.console.error(message);}};$.fn.masonry=function(options){if(typeof options==='string'){var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$.data(this,'masonry');if(!instance){logError("cannot call methods on masonry prior to initialization; "+"attempted to call method '"+options+"'");return;}
if(!$.isFunction(instance[options])||options.charAt(0)==="_"){logError("no such method '"+options+"' for masonry instance");return;}
instance[options].apply(instance,args);});}else{this.each(function(){var instance=$.data(this,'masonry');if(instance){instance.option(options||{});instance._init();}else{$.data(this,'masonry',new $.Mason(options,this));}});}
return this;};})(window,jQuery);(function($,window){$window=$(window);$.fn.lazyload=function(options){var elements=this;var settings={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:window,data_attribute:"original",skip_invisible:true,appear:null,load:null};function update(){var counter=0;elements.each(function(){var $this=$(this);if(settings.skip_invisible&&!$this.is(":visible")){return;}
if($.abovethetop(this,settings)||$.leftofbegin(this,settings)){}else if(!$.belowthefold(this,settings)&&!$.rightoffold(this,settings)){$this.trigger("appear");}else{if(++counter>settings.failure_limit){return false;}}});}
if(options){if(undefined!==options.failurelimit){options.failure_limit=options.failurelimit;delete options.failurelimit;}
if(undefined!==options.effectspeed){options.effect_speed=options.effectspeed;delete options.effectspeed;}
$.extend(settings,options);}
$container=(settings.container===undefined||settings.container===window)?$window:$(settings.container);if(0===settings.event.indexOf("scroll")){$container.bind(settings.event,function(event){return update();});}
this.each(function(){var self=this;var $self=$(self);self.loaded=false;$self.one("appear",function(){if(!this.loaded){if(settings.appear){var elements_left=elements.length;settings.appear.call(self,elements_left,settings);}
$("<img />").bind("load",function(){$self.hide().attr("src",$self.data(settings.data_attribute))
[settings.effect](settings.effect_speed);self.loaded=true;var temp=$.grep(elements,function(element){return!element.loaded;});elements=$(temp);if(settings.load){var elements_left=elements.length;settings.load.call(self,elements_left,settings);}}).attr("src",$self.data(settings.data_attribute));}});if(0!==settings.event.indexOf("scroll")){$self.bind(settings.event,function(event){if(!self.loaded){$self.trigger("appear");}});}});$window.bind("resize",function(event){update();});update();return this;};$.belowthefold=function(element,settings){var fold;if(settings.container===undefined||settings.container===window){fold=$window.height()+$window.scrollTop();}else{fold=$container.offset().top+$container.height();}
return fold<=$(element).offset().top-settings.threshold;};$.rightoffold=function(element,settings){var fold;if(settings.container===undefined||settings.container===window){fold=$window.width()+$window.scrollLeft();}else{fold=$container.offset().left+$container.width();}
return fold<=$(element).offset().left-settings.threshold;};$.abovethetop=function(element,settings){var fold;if(settings.container===undefined||settings.container===window){fold=$window.scrollTop();}else{fold=$container.offset().top;}
return fold>=$(element).offset().top+settings.threshold+$(element).height();};$.leftofbegin=function(element,settings){var fold;if(settings.container===undefined||settings.container===window){fold=$window.scrollLeft();}else{fold=$container.offset().left;}
return fold>=$(element).offset().left+settings.threshold+$(element).width();};$.inviewport=function(element,settings){return!$.rightofscreen(element,settings)&&!$.leftofscreen(element,settings)&&!$.belowthefold(element,settings)&&!$.abovethetop(element,settings);};$.extend($.expr[':'],{"below-the-fold":function(a){return $.belowthefold(a,{threshold:0,container:window});},"above-the-top":function(a){return!$.belowthefold(a,{threshold:0,container:window});},"right-of-screen":function(a){return $.rightoffold(a,{threshold:0,container:window});},"left-of-screen":function(a){return!$.rightoffold(a,{threshold:0,container:window});},"in-viewport":function(a){return!$.inviewport(a,{threshold:0,container:window});},"above-the-fold":function(a){return!$.belowthefold(a,{threshold:0,container:window});},"right-of-fold":function(a){return $.rightoffold(a,{threshold:0,container:window});},"left-of-fold":function(a){return!$.rightoffold(a,{threshold:0,container:window});}});})(jQuery,window);(function($){var isIE6=($.browser.msie&&$.browser.version<7);var body=$(document.body);var window=$(window);var jqzoompluging_disabled=false;$.fn.jqzoom=function(options){return this.each(function(){var node=this.nodeName.toLowerCase();if(node=='a'){new jqzoom(this,options);}});};jqzoom=function(el,options){var api=null;api=$(el).data("jqzoom");if(api)return api;var obj=this;var settings=$.extend({},$.jqzoom.defaults,options||{});obj.el=el;el.rel=$(el).attr('rel');el.zoom_active=false;el.zoom_disabled=false;el.largeimageloading=false;el.largeimageloaded=false;el.scale={};el.timer=null;el.mousepos={};el.mouseDown=false;$(el).css({'outline-style':'none','text-decoration':'none'});var img=$("img:eq(0)",el);el.title=$(el).attr('title');el.imagetitle=img.attr('title');var zoomtitle=($.trim(el.title).length>0)?el.title:el.imagetitle;var smallimage=new Smallimage(img);var lens=new Lens();var stage=new Stage();var largeimage=new Largeimage();var loader=new Loader();$(el).bind('click',function(e){e.preventDefault();return false;});var zoomtypes=['standard','drag','innerzoom','reverse'];if($.inArray($.trim(settings.zoomType),zoomtypes)<0){settings.zoomType='standard';}
$.extend(obj,{create:function(){if($(".zoomPad",el).length==0){el.zoomPad=$('<div/>').addClass('zoomPad');img.wrap(el.zoomPad);}
if(settings.zoomType=='innerzoom'){settings.zoomWidth=smallimage.w;settings.zoomHeight=smallimage.h;}
if($(".zoomPup",el).length==0){lens.append();}
if($(".zoomWindow",el).length==0){stage.append();}
if($(".zoomPreload",el).length==0){loader.append();}
if(settings.preloadImages||settings.zoomType=='drag'||settings.alwaysOn){obj.load();}
obj.init();},init:function(){if(settings.zoomType=='drag'){$(".zoomPad",el).mousedown(function(){el.mouseDown=true;});$(".zoomPad",el).mouseup(function(){el.mouseDown=false;});document.body.ondragstart=function(){return false;};$(".zoomPad",el).css({cursor:'default'});$(".zoomPup",el).css({cursor:'move'});}
if(settings.zoomType=='innerzoom'){$(".zoomWrapper",el).css({cursor:'crosshair'});}
$(".zoomPad",el).bind('mouseenter mouseover',function(event){img.attr('title','');$(el).attr('title','');el.zoom_active=true;smallimage.fetchdata();if(el.largeimageloaded){obj.activate(event);}else{obj.load();}});$(".zoomPad",el).bind('mouseleave',function(event){obj.deactivate();});$(".zoomPad",el).bind('mousemove',function(e){if(e.pageX>smallimage.pos.r||e.pageX<smallimage.pos.l||e.pageY<smallimage.pos.t||e.pageY>smallimage.pos.b){lens.setcenter();return false;}
el.zoom_active=true;if(el.largeimageloaded&&!$('.zoomWindow',el).is(':visible')){obj.activate(e);}
if(el.largeimageloaded&&(settings.zoomType!='drag'||(settings.zoomType=='drag'&&el.mouseDown))){lens.setposition(e);}});var thumb_preload=new Array();var i=0;var thumblist=new Array();thumblist=$('a').filter(function(){var regex=new RegExp("gallery[\\s]*:[\\s]*'"+$.trim(el.rel)+"'","i");var rel=$(this).attr('rel');if(regex.test(rel)){return this;}});if(thumblist.length>0){var first=thumblist.splice(0,1);thumblist.push(first);}
thumblist.each(function(){if(settings.preloadImages){var thumb_options=$.extend({},eval("("+$.trim($(this).attr('rel'))+")"));thumb_preload[i]=new Image();thumb_preload[i].src=thumb_options.largeimage;i++;}
$(this).click(function(e){if($(this).hasClass('zoomThumbActive')){return false;}
thumblist.each(function(){$(this).removeClass('zoomThumbActive');});e.preventDefault();obj.swapimage(this);return false;});});},load:function(){if(el.largeimageloaded==false&&el.largeimageloading==false){var url=$(el).attr('href');el.largeimageloading=true;largeimage.loadimage(url);}},activate:function(e){clearTimeout(el.timer);lens.show();stage.show();},deactivate:function(e){switch(settings.zoomType){case'drag':break;default:img.attr('title',el.imagetitle);$(el).attr('title',el.title);if(settings.alwaysOn){lens.setcenter();}else{stage.hide();lens.hide();}
break;}
el.zoom_active=false;},swapimage:function(link){el.largeimageloading=false;el.largeimageloaded=false;var options=new Object();options=$.extend({},eval("("+$.trim($(link).attr('rel'))+")"));if(options.smallimage&&options.largeimage){var smallimage=options.smallimage;var largeimage=options.largeimage;$(link).addClass('zoomThumbActive');$(el).attr('href',largeimage);img.attr('src',smallimage);lens.hide();stage.hide();obj.load();}else{alert('ERROR :: Missing parameter for largeimage or smallimage.');throw'ERROR :: Missing parameter for largeimage or smallimage.';}
return false;}});if(img[0].complete){smallimage.fetchdata();if($(".zoomPad",el).length==0)obj.create();}
function Smallimage(image){var $obj=this;this.node=image[0];this.findborder=function(){var bordertop=0;bordertop=image.css('border-top-width');btop='';var borderleft=0;borderleft=image.css('border-left-width');bleft='';if(bordertop){for(i=0;i<3;i++){var x=[];x=bordertop.substr(i,1);if(isNaN(x)==false){btop=btop+''+bordertop.substr(i,1);}else{break;}}}
if(borderleft){for(i=0;i<3;i++){if(!isNaN(borderleft.substr(i,1))){bleft=bleft+borderleft.substr(i,1)}else{break;}}}
$obj.btop=(btop.length>0)?eval(btop):0;$obj.bleft=(bleft.length>0)?eval(bleft):0;};this.fetchdata=function(){$obj.findborder();$obj.w=image.width();$obj.h=image.height();$obj.ow=image.outerWidth();$obj.oh=image.outerHeight();$obj.pos=image.offset();$obj.pos.l=image.offset().left+$obj.bleft;$obj.pos.t=image.offset().top+$obj.btop;$obj.pos.r=$obj.w+$obj.pos.l;$obj.pos.b=$obj.h+$obj.pos.t;$obj.rightlimit=image.offset().left+$obj.ow;$obj.bottomlimit=image.offset().top+$obj.oh;};this.node.onerror=function(){alert('由于网络问题加载大图失败，请尝试刷新！');throw'由于网络问题加载大图失败，请尝试刷新！';};this.node.onload=function(){$obj.fetchdata();if($(".zoomPad",el).length==0)obj.create();};return $obj;};function Loader(){var $obj=this;this.append=function(){this.node=$('<div/>').addClass('zoomPreload').css('visibility','hidden').html(settings.preloadText);$('.zoomPad',el).append(this.node);};this.show=function(){this.node.top=(smallimage.oh-this.node.height())/2;this.node.left=(smallimage.ow-this.node.width())/2;this.node.css({top:this.node.top,left:this.node.left,position:'absolute',visibility:'visible'});};this.hide=function(){this.node.css('visibility','hidden');};return this;}
function Lens(){var $obj=this;this.node=$('<div/>').addClass('zoomPup');this.append=function(){$('.zoomPad',el).append($(this.node).hide());if(settings.zoomType=='reverse'){this.image=new Image();this.image.src=smallimage.node.src;$(this.node).empty().append(this.image);}};this.setdimensions=function(){this.node.w=(parseInt((settings.zoomWidth)/el.scale.x)>smallimage.w)?smallimage.w:(parseInt(settings.zoomWidth/el.scale.x));this.node.h=(parseInt((settings.zoomHeight)/el.scale.y)>smallimage.h)?smallimage.h:(parseInt(settings.zoomHeight/el.scale.y));this.node.top=(smallimage.oh-this.node.h-2)/2;this.node.left=(smallimage.ow-this.node.w-2)/2;this.node.css({top:0,left:0,width:this.node.w+'px',height:this.node.h+'px',position:'absolute',display:'none',borderWidth:1+'px'});if(settings.zoomType=='reverse'){this.image.src=smallimage.node.src;$(this.node).css({'opacity':1});$(this.image).css({position:'absolute',display:'block',left:-(this.node.left+1-smallimage.bleft)+'px',top:-(this.node.top+1-smallimage.btop)+'px'});}};this.setcenter=function(){this.node.top=(smallimage.oh-this.node.h-2)/2;this.node.left=(smallimage.ow-this.node.w-2)/2;this.node.css({top:this.node.top,left:this.node.left});if(settings.zoomType=='reverse'){$(this.image).css({position:'absolute',display:'block',left:-(this.node.left+1-smallimage.bleft)+'px',top:-(this.node.top+1-smallimage.btop)+'px'});}
largeimage.setposition();};this.setposition=function(e){el.mousepos.x=e.pageX;el.mousepos.y=e.pageY;var lensleft=0;var lenstop=0;function overleft(lens){return el.mousepos.x-(lens.w)/2<smallimage.pos.l;}
function overright(lens){return el.mousepos.x+(lens.w)/2>smallimage.pos.r;}
function overtop(lens){return el.mousepos.y-(lens.h)/2<smallimage.pos.t;}
function overbottom(lens){return el.mousepos.y+(lens.h)/2>smallimage.pos.b;}
lensleft=el.mousepos.x+smallimage.bleft-smallimage.pos.l-(this.node.w+2)/2;lenstop=el.mousepos.y+smallimage.btop-smallimage.pos.t-(this.node.h+2)/2;if(overleft(this.node)){lensleft=smallimage.bleft-1;}else if(overright(this.node)){lensleft=smallimage.w+smallimage.bleft-this.node.w-1;}
if(overtop(this.node)){lenstop=smallimage.btop-1;}else if(overbottom(this.node)){lenstop=smallimage.h+smallimage.btop-this.node.h-1;}
this.node.left=lensleft;this.node.top=lenstop;this.node.css({'left':lensleft+'px','top':lenstop+'px'});if(settings.zoomType=='reverse'){if($.browser.msie&&$.browser.version>7){$(this.node).empty().append(this.image);}
$(this.image).css({position:'absolute',display:'block',left:-(this.node.left+1-smallimage.bleft)+'px',top:-(this.node.top+1-smallimage.btop)+'px'});}
largeimage.setposition();};this.hide=function(){img.css({'opacity':1});this.node.hide();};this.show=function(){if(settings.zoomType!='innerzoom'&&(settings.lens||settings.zoomType=='drag')){this.node.show();}
if(settings.zoomType=='reverse'){img.css({'opacity':settings.imageOpacity});}};this.getoffset=function(){var o={};o.left=$obj.node.left;o.top=$obj.node.top;return o;};return this;};function Stage(){var $obj=this;this.node=$("<div class='zoomWindow'><div class='zoomWrapper'><div class='zoomWrapperTitle'></div><div class='zoomWrapperImage'></div></div></div>");this.ieframe=$('<iframe class="zoomIframe" src="javascript:\'\';" marginwidth="0" marginheight="0" align="bottom" scrolling="no" frameborder="0" ></iframe>');this.setposition=function(){this.node.leftpos=0;this.node.toppos=0;if(settings.zoomType!='innerzoom'){switch(settings.position){case"left":this.node.leftpos=(smallimage.pos.l-smallimage.bleft-Math.abs(settings.xOffset)-settings.zoomWidth>0)?(0-settings.zoomWidth-Math.abs(settings.xOffset)):(smallimage.ow+Math.abs(settings.xOffset));this.node.toppos=Math.abs(settings.yOffset);break;case"top":this.node.leftpos=Math.abs(settings.xOffset);this.node.toppos=(smallimage.pos.t-smallimage.btop-Math.abs(settings.yOffset)-settings.zoomHeight>0)?(0-settings.zoomHeight-Math.abs(settings.yOffset)):(smallimage.oh+Math.abs(settings.yOffset));break;case"bottom":this.node.leftpos=Math.abs(settings.xOffset);this.node.toppos=(smallimage.pos.t-smallimage.btop+smallimage.oh+Math.abs(settings.yOffset)+settings.zoomHeight<screen.height)?(smallimage.oh+Math.abs(settings.yOffset)):(0-settings.zoomHeight-Math.abs(settings.yOffset));break;default:this.node.leftpos=(smallimage.rightlimit+Math.abs(settings.xOffset)+settings.zoomWidth<screen.width)?(smallimage.ow+Math.abs(settings.xOffset)):(0-settings.zoomWidth-Math.abs(settings.xOffset));this.node.toppos=Math.abs(settings.yOffset);break;}}
this.node.css({'left':this.node.leftpos+'px','top':this.node.toppos+'px'});return this;};this.append=function(){$('.zoomPad',el).append(this.node);this.node.css({position:'absolute',display:'none',zIndex:5001});if(settings.zoomType=='innerzoom'){this.node.css({cursor:'default'});var thickness=(smallimage.bleft==0)?1:smallimage.bleft;$('.zoomWrapper',this.node).css({borderWidth:thickness+'px'});}
$('.zoomWrapper',this.node).css({width:Math.round(settings.zoomWidth)+'px',borderWidth:thickness+'px'});$('.zoomWrapperImage',this.node).css({width:'100%',height:Math.round(settings.zoomHeight)+'px'});$('.zoomWrapperTitle',this.node).css({width:'100%',position:'absolute'});$('.zoomWrapperTitle',this.node).hide();if(settings.title&&zoomtitle.length>0){$('.zoomWrapperTitle',this.node).html(zoomtitle).show();}
$obj.setposition();};this.hide=function(){switch(settings.hideEffect){case'fadeout':this.node.fadeOut(settings.fadeoutSpeed,function(){});break;default:this.node.hide();break;}
this.ieframe.hide();};this.show=function(){switch(settings.showEffect){case'fadein':this.node.fadeIn();this.node.fadeIn(settings.fadeinSpeed,function(){});break;default:this.node.show();break;}
if(isIE6&&settings.zoomType!='innerzoom'){this.ieframe.width=this.node.width();this.ieframe.height=this.node.height();this.ieframe.left=this.node.leftpos;this.ieframe.top=this.node.toppos;this.ieframe.css({display:'block',position:"absolute",left:this.ieframe.left,top:this.ieframe.top,zIndex:99,width:this.ieframe.width+'px',height:this.ieframe.height+'px'});$('.zoomPad',el).append(this.ieframe);this.ieframe.show();};};};function Largeimage(){var $obj=this;this.node=new Image();this.loadimage=function(url){loader.show();this.url=url;this.node.style.position='absolute';this.node.style.border='0px';this.node.style.display='none';this.node.style.left='-5000px';this.node.style.top='0px';document.body.appendChild(this.node);this.node.src=url;};this.fetchdata=function(){var image=$(this.node);var scale={};this.node.style.display='block';$obj.w=image.width();$obj.h=image.height();$obj.pos=image.offset();$obj.pos.l=image.offset().left;$obj.pos.t=image.offset().top;$obj.pos.r=$obj.w+$obj.pos.l;$obj.pos.b=$obj.h+$obj.pos.t;scale.x=($obj.w/smallimage.w);scale.y=($obj.h/smallimage.h);el.scale=scale;document.body.removeChild(this.node);$('.zoomWrapperImage',el).empty().append(this.node);lens.setdimensions();};this.node.onerror=function(){alert('由于网络问题加载大图失败，请尝试刷新！');throw'由于网络问题加载大图失败，请尝试刷新！';};this.node.onload=function(){$obj.fetchdata();loader.hide();el.largeimageloading=false;el.largeimageloaded=true;if(settings.zoomType=='drag'||settings.alwaysOn){lens.show();stage.show();lens.setcenter();}};this.setposition=function(){var left=-el.scale.x*(lens.getoffset().left-smallimage.bleft+1);var top=-el.scale.y*(lens.getoffset().top-smallimage.btop+1);$(this.node).css({'left':left+'px','top':top+'px'});};return this;};$(el).data("jqzoom",obj);};$.jqzoom={defaults:{zoomType:'standard',zoomWidth:300,zoomHeight:300,xOffset:10,yOffset:0,position:"right",preloadImages:true,preloadText:'加载中…',title:true,lens:true,imageOpacity:0.4,alwaysOn:false,showEffect:'show',hideEffect:'hide',fadeinSpeed:'slow',fadeoutSpeed:'2000'},disable:function(el){var api=$(el).data('jqzoom');api.disable();return false;},enable:function(el){var api=$(el).data('jqzoom');api.enable();return false;},disableAll:function(el){jqzoompluging_disabled=true;},enableAll:function(el){jqzoompluging_disabled=false;}};})(jQuery);